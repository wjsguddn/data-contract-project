# 개발 단계 및 우선순위

## Phase 1: 기본 분류 시스템 (완료)

### 목표
사용자 계약서를 5종 표준계약서 중 하나로 자동 분류하는 기본 시스템 구축

### 완료된 기능
- **인프라**: Docker Compose, Redis, Celery, SQLite
- **지식베이스**: 표준계약서 5종 파싱, 청킹, 임베딩, 인덱싱
- **사용자 계약서 처리**: DOCX 파싱 (간단한 "제n조" 패턴)
- **Classification Agent**: RAG + LLM 기반 유형 분류
- **웹 인터페이스**: Streamlit 기반 업로드 및 분류 결과 표시
- **API**: FastAPI 백엔드 엔드포인트

### 제한사항
- 구조화된 DOCX만 지원 ("제n조" 형식)
- 분류만 가능 (검증 기능 없음)
- Azure OpenAI 자격 증명 필수

## Phase 2: 정합성 검증 시스템 (구현 중)

### 목표
분류된 계약서의 정합성을 검증하고 상세한 분석 보고서 제공

### 구현 완료 기능
- **A1 Node (완전성 검증)**: 조항 매칭, 누락 조항 식별, LLM 재검증
- **A2 Node (체크리스트 검증)**: 활용안내서 기반 체크리스트 검증
- **A3 Node (내용 분석)**: 조항별 내용 비교 및 충실도 평가
- **병렬 처리**: A1-Stage1 → [A1-Stage2 || A2 || A3] 아키텍처
- **하이브리드 검색**: FAISS + Whoosh 결합 검색
- **토큰 사용량 추적**: API 호출별 토큰 사용량 모니터링

### 구현 예정 기능
- **Report Agent**: 보고서 생성 및 품질 검증
- **활용안내서 통합**: 파싱, 인덱싱, 검증 시 활용
- **보고서 다운로드**: PDF/DOCX 형식 지원

### 핵심 원칙
- **맥락 기반 유연한 검증**: 표준계약서와 다르더라도 의미적으로 유사하면 인정
- **과도한 규격화 방지**: 단순 형식 비교가 아닌 실질적 내용 평가
- **사용자 친화적**: 이해하기 쉬운 보고서 및 개선 제안

## Phase 3: 고도화 기능 (미래)

### 목표
다양한 형식의 계약서 지원 및 고급 분석 기능

### 구상 중인 기능
- **VLM 기반 파싱**: 비정형 계약서 구조 인식
- **다국어 지원**: 영어 계약서 처리
- **템플릿 생성**: 표준계약서 기반 계약서 초안 생성
- **버전 관리**: 계약서 수정 이력 추적
- **대시보드**: 조직 차원의 계약 관리 인사이트

## 개발 가이드라인

### 코드 품질
- 각 Phase는 독립적으로 동작 가능해야 함
- Phase 1 기능을 Phase 2 구현 시 손상시키지 않음
- 테스트 코드 작성 (단위 테스트, 통합 테스트)
- 에러 처리 및 로깅 철저히

### 아키텍처 원칙
- 마이크로서비스 아키텍처 유지
- 각 Agent는 독립적으로 확장 가능
- Redis 큐를 통한 느슨한 결합
- Docker 컨테이너 기반 배포

### 성능 고려사항
- 검색 인덱스 메모리 캐싱
- LLM API 호출 최소화 (배치 처리)
- 비동기 처리로 사용자 경험 향상
- 결과 캐싱으로 중복 작업 방지

## 현재 우선순위

### 즉시 수행 (Phase 2 완성)
1. **Consistency Agent 통합 테스트**: A1, A2, A3 노드 전체 플로우 검증
2. **Report Agent 구현**: 검증 결과 통합 및 보고서 생성
3. **활용안내서 통합**: 체크리스트 및 가이드라인 파싱
4. **성능 최적화**: 병렬 처리 및 캐싱 개선

### Phase 3 준비
1. **VLM 파싱 연구**: 비정형 계약서 구조 인식
2. **보고서 템플릿**: PDF/DOCX 출력 형식 설계
3. **사용자 피드백**: 실제 사용자 테스트 및 개선사항 수집
4. **확장성 검토**: 대용량 처리 및 멀티테넌트 지원